---
title: State
sidebar_position: 1
---

import CollapseContainer from "../../src/components/Collapse.tsx"

## Basic Use

```ts title="ts"
import { state } from "@plexusjs/core"
// A state instance is created with a state module
const myCoolAgeState = state(23)

myCoolAgeState.value // Output: 23

myCoolAgeState.set(42)

myCoolAgeState.value // Output: 42
```

## Properties

##### state `.value`

<CollapseContainer miniTitle="Returns" data={[{ type: "any", description: "The value (reactive) of the state." }]} />

##### state `.lastValue`

<CollapseContainer miniTitle="Returns" data={[{ type: "any", description: "The previous value (reactive) of the state." }]} />

##### state `.nextValue`

<CollapseContainer miniTitle="Returns" data={[{ type: "any", description: "The next value of the state." }]} />

:::tip Value Prepping
This is normally managed internally, but you can set it to "prep" the state before applying the value.

```ts
// Set the next value to prep the state
state.nextValue = { foo: "bar" }
state.set()
state.value //=> { foo: "bar" }
```

:::

##### state `.initialValue`

<CollapseContainer miniTitle="Returns" data={[{ type: "any", description: "The initial (default) value of the state." }]} />

##### state `.name`

<CollapseContainer
	miniTitle="Returns"
	data={[
		{
			type: "string",
			description: `The name of the state (NOTE: set with the ".key()" function).`,
		},
	]}
/>

## Methods

##### state `.set()`

Set the value of the state

<CollapseContainer title="Arguments" data={[{ key: "initialValue", type: "any", description: "The new value of the state." }]} />
<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.patch()`

Patch the current value of the state

<CollapseContainer
	title="Arguments"
	data={[{ key: "initialValue", type: "(currentValue: any) => any", description: "The the value to patch over the current value." }]}
/>
<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.watch()`

Watch for changes on this state

<CollapseContainer title="Arguments" data={[{ key: "callback", type: "any", description: "The callback to run when the state changes." }]} />
<CollapseContainer miniTitle="Returns" data={[{ type: "() => void", description: "The remove function to stop watching." }]} />

##### state `.isEqual()`

Compare a thing to the current value, if they are equal, returns true

<CollapseContainer title="Arguments" data={[{ key: "value", type: "any", description: "The thing to compare the current value to." }]} />
<CollapseContainer miniTitle="Returns" data={[{ type: "boolean", description: "A boolean representing if they are equal." }]} />

##### state `.interval()`

On a set interval, run a function to update the state

<CollapseContainer
	title="Arguments"
	data={[
		{
			key: "setterFunction",
			type: "(currentValue: any) => any",
			description: "The function used to update the state on the interval; returns the new value.",
		},
		{
			key: "ms",
			type: "number",
			description: "The interval duration (in milliseconds).",
		},
	]}
/>

##### state `.clearInterval()`

Stop the state interval

<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.persist()`

Persist the state to selected storage

<CollapseContainer title="Arguments" data={[{ key: "key", type: "string", description: "The storage prefix to use." }]} />
<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.undo()`

Reset the state to the previous value

<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.reset()`

Reset the state to the initial value

<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />

##### state `.key()`

Set the key of the state for internal tracking

<CollapseContainer title="Arguments" data={[{ key: "name", type: "string", description: "Set the key of the state for internal tracking." }]} />

<CollapseContainer miniTitle="Returns" data={[{ type: "this", description: "This state." }]} />
