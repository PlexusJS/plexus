---
title: API
sidebar_position: 5
---

import CollapseContainer from "../../src/components/Collapse.tsx"

## Basic Use

```ts
import { api, action } from "@plexusjs/core"
const myCoolApi = api("https://api.example.com")

const fetchUsers = action(async ({ onCatch }) => {
	onCatch(console.error)
	return myCoolApi.get("/users")
})

const users = await fetchUsers() //=> [{id: 1, name: "John"}, {id: 2, name: "Jane"}] or something
```

## Properties

##### api `.config`

The current base configuration of this api

<CollapseContainer
	showingReturnType
	data={[
		{
			key: ".headers",
			type: "Record<string, string>",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".body",
			type: "BodyInit | null",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".cache",
			type: "RequestCache",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".credentials",
			type: "RequestCredentials",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".integrity",
			type: "string",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".keepalive",
			type: "boolean",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".mode",
			type: "RequestMode",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".redirect",
			type: "RequestRedirect",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".referrer",
			type: "string",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".referrerPolicy",
			type: "ReferrerPolicy",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".signal",
			type: "AbortSigna | nulll",
			description: "Refer to Official Documentation.",
		},
		{
			key: ".window",
			type: "null",
			description: "Refer to Official Documentation.",
		},
		/**
		/** A BodyInit object or null to set request's body. */
		/** A string indicating how the request will interact with the browser's cache to set request's cache. */
		/** A string indicating whether credentials will be sent with the request always, never, or only when sent to a same-origin URL. Sets request's credentials. */
		/** A Headers object, an object literal, or an array of two-item arrays to set request's headers. */
		/** A cryptographic hash of the resource to be fetched by request. Sets request's integrity. */
		/** A boolean to set request's keepalive. */
		/** A string to set request's method. */
		/** A string to indicate whether the request will use CORS, or will be restricted to same-origin URLs. Sets request's mode. */
		/** A string indicating whether request follows redirects, results in an error upon encountering a redirect, or returns the redirect (in an opaque fashion). Sets request's redirect. */
		/** A string whose value is a same-origin URL, "about:client", or the empty string, to set request's referrer. */
		/** A referrer policy to set request's referrerPolicy. */
		/** An AbortSignal to set request's signal. */
		/** Can only be null. Used to disassociate request from any Window. */
	]}
/>

## Methods

##### api `.get()`

Send a get request

<CollapseContainer
	title="Arguments"
	data={[
		{ key: "Path", type: "string", description: "The path to call on the api." },
		{ key: "Query", optional: true, type: "Record<string, string>", description: "The object to use for the url query string." },
	]}
/>

##### api `.post()`

Send a post request

<CollapseContainer
	title="Arguments"
	data={[
		{ key: "Path", type: "string", description: "The path to call on the api." },
		{ key: "Body", optional: true, type: "Record<string, string>", description: "The object to use for the request body." },
	]}
/>

##### api `.put()`

Send a put request

<CollapseContainer
	title="Arguments"
	data={[
		{ key: "Path", type: "string", description: "The path to call on the api." },
		{ key: "Body", optional: true, type: "Record<string, string>", description: "The object to use for the request body." },
	]}
/>

##### api `.delete()`

Send a delete request

<CollapseContainer title="Arguments" data={[{ key: "Path", type: "string", description: "The path to call on the api." }]} />

##### api `.patch()`

Send a patch request

<CollapseContainer
	title="Arguments"
	data={[
		{ key: "Path", type: "string", description: "The path to call on the api." },
		{ key: "Body", optional: true, type: "Record<string, string>", description: "The object to use for the request body." },
	]}
/>

##### api `.options()`

Set the configuration options for fetch

<CollapseContainer
	title="Arguments"
	data={[
		{ key: "Path", type: "string", description: "The path to call on the api." },
		{ key: "Query", optional: true, type: "Record<string, string>", description: "The object to use for the url query string" },
	]}
/>

##### api `.auth()`

Set the the Authorization header for the request

:::note Stored Differently From other Headers
This is stored seprately from other headers. If there is another value for the Authorization header in options, this value will override it.
:::

<CollapseContainer
	title="Arguments"
	data={[
		{
			key: "AuthType",
			type: `"bearer" | "basic" | "jwt"`,
			description: "The type of API token being used. This determines the prefix of the Authorization header.",
		},
		{ key: "TokenValue", type: "string", description: "The object to use for the url query string" },
	]}
/>

##### api `.headers()`

Set headers for the requests of this API Instance

<CollapseContainer
	title="Arguments"
	data={[
		{
			key: "HeaderObject",
			type: `Record<string, string>`,
			description: "An object of headers to set for the request.",
		},
	]}
/>

##### api `.reset()`

Reset this routes configuration

<CollapseContainer
	showingReturnType
	data={[
		{
			type: `ApiInstance`,
			description: "Returns the reset API Instance",
		},
	]}
/>

## Response

##### apiResponse `.data`

The data returned from the request in JSON format. If the data is not supposed to be JSON, use [apiResponse`.rawData`](#apiresponse-rawdata)

<CollapseContainer showingReturnType data={[{ type: "string", description: "The internal id of the PreAction." }]} />

##### apiResponse `.status`

The HTTP status of the request

<CollapseContainer showingReturnType data={[{ type: "number", description: "The HTTP status code of the response." }]} />

##### apiResponse `.ok`

Is the status code between 200 to 299?

<CollapseContainer
	showingReturnType
	data={[{ type: "boolean", description: "True if the response status was between 200 and 299. False if otherwise." }]}
/>

##### apiResponse `.rawData`

The raw string of the response data

<CollapseContainer showingReturnType data={[{ type: "string", description: "The internal id of the PreAction." }]} />

##### apiResponse `.response`

The HTTP response object ([ResponseInit](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response))

<CollapseContainer
	showingReturnType
	data={[
		{
			type: "ResponseInit",
			description: "Refer to Official Documentation.",
		},
	]}
/>
